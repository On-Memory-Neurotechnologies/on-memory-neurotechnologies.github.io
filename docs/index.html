<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>On Memory Neurotechnologies</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="icon" href="styles/favicon.ico" />
    <link rel="stylesheet" href="css/site.css" />

    <script src="components/nav.js" type="text/javascript" defer></script>
    <script
      src="components/OnDementia.js"
      type="text/javascript"
      defer
    ></script>
    <script src="components/MeetPat.js" type="text/javascript" defer></script>
    <script src="components/OMP.js" type="text/javascript" defer></script>
    <script src="components/Prosthesis1.js" type="text/javascript" defer></script>
    <script src="components/Prosthesis2.js" type="text/javascript" defer></script>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav-bar></nav-bar>

    <div class="landing-page">
      <h1>On Memory Neurotechnologies</h1>
      <h3>
        An interactive article on memory prostheses—and how you can help design
        them
      </h3>
      <div class="buttons">
        <a onclick="transitionToNextDeck()" id="button1">Start a new session</a>
        <a href="#" id="button2">Continue last session</a>
      </div>
    </div>

    <div id="content"></div>

    <!--    <section id="commercial-omn-header" class="header-page">-->
    <!--      <h2>PART 3</h2>-->
    <!--      <h1>On Commercial Neurotechnologies</h1>-->
    <!--    </section>-->

    <!--    <section class="content-page">-->
    <!--      <div class="comm-omn">-->
    <!--        <p>-->
    <!--          Problems with short term memory, such as what Pat is facing, may soon-->
    <!--          be addressed by commercial neurotech Memory recall device-->
    <!--        </p>-->
    <!--        <p>-->
    <!--          If Pat was your parent or grandparent, would the risk of surgery be-->
    <!--          worth it to improve these impairments?-->
    <!--        </p>-->
    <!--        <p>-->
    <!--          Over the next two years, Pat (now aged 74) experiences more advanced-->
    <!--          symptoms of AD. She starts to have trouble recalling her children’s-->
    <!--          names when she chats with them and sometimes forgets who she is-->
    <!--          speaking with. She is also beginning to need help with daily-->
    <!--          functioning tasks like choosing her clothes in the morning, and-->
    <!--          remembering to eat. Pat’s husband provides her with daily support for-->
    <!--          these tasks and he reports that, “some days are better than others.”-->
    <!--        </p>-->
    <!--        <p>-->
    <!--          Problems with decision making and name/ word recall, such as what Pat-->
    <!--          is facing, may soon be addressed by commercial neurotech-->
    <!--        </p>-->
    <!--        <p>Decision assisting device Word recall device</p>-->
    <!--        <p>-->
    <!--          If Pat were your parent or grandparent, would the risk of surgery be-->
    <!--          worth it to improve her daily functioning and recall of names?-->
    <!--        </p>-->
    <!--        <p>-->
    <!--          Over the next five years, Pat (now aged 79) shows further AD-related-->
    <!--          decline. Her family notices that she’s “not acting like herself.” On-->
    <!--          several occasions, Pat has accused her husband of having an affair.-->
    <!--          She has also made some inappropriate remarks to her 10 y.o.-->
    <!--          granddaughter. After these moments of agitation, Pat seems to “go back-->
    <!--          to normal” as if nothing has happened. Problems with changes in-->
    <!--          personality, such as what Pat is facing, may soon be addressed by-->
    <!--          commercial neurotech Personality maintaining device-->
    <!--        </p>-->

    <!--        <p>-->
    <!--          If Pat were your parent or grandparent, would the risk of surgery be-->
    <!--          worth it to restore and preserve her personality traits?-->
    <!--        </p>-->
    <!--      </div>-->
    <!--    </section>-->

    <script>
      let currentDeck = -1;
      let currentSlide = 0;
      let scrollAnchor = 0;

      let odDeck = {
        id: "on-dementia",
        slides: ["on-dementia", "meet-pat"],
      };

      let ompDeck = {
        id: "on-memory-prostheses",
        slides: ["on-memory-prostheses", "the-prosthesis-1", "the-prosthesis-2"],
      };

      let decks = [odDeck, ompDeck];

      window.addEventListener("resize", goToScrollAnchor);

      function addDeck() {
        document.getElementById(
          "content"
        ).innerHTML += `<div id="${decks[currentDeck].id}" class="page"></div>`;
        placeSlideContent();
      }

      function insertProgressButton() {
        if (decks[currentDeck].slides.length-1 != currentSlide) {
          document.getElementById(
            decks[currentDeck].id
          ).innerHTML += `<button id="move-button" class="move-button" onclick="nextSlide()"><i class="arrow down"></i></button>`;
        } else {
          document.getElementById(
                  decks[currentDeck].id
          ).innerHTML += `<button id="move-button" class="move-button" onclick="transitionToNextDeck()"><i class="arrow down"></i></button>`;
          }
      }

      function transitionToNextDeck() {
        currentDeck++;
        currentSlide = 0;
        let element = document.getElementById(decks[currentDeck].id)
        if (element === null){
          addDeck(decks[currentDeck].slides[currentDeck]);
       }
        moveViewport();
        insertProgressButton();
      }

      function transitionToPreviousDeck() {
        currentDeck -= 1;
        currentSlide = decks[currentSlide].slides.length - 1;
        moveViewport();
        insertProgressButton();
      }

      function moveViewport() {
        let doc = document.body;
        let scale = 0.92;
        scrollAnchor = doc.scrollTop + doc.clientHeight * scale;
        window.scrollTo(0, scrollAnchor);
      }

      function goToScrollAnchor() {
        window.scrollTo(0, scrollAnchor);
      }

      function nextSlide() {
        currentSlide++;
        placeSlideContent();
        insertProgressButton();
        }

      function placeSlideContent(){
        let viewName = decks[currentDeck].slides[currentSlide];
        document.getElementById(
                decks[currentDeck].id
        ).innerHTML = `<${viewName}></${viewName}>`;
      }

      // document.addEventListener("scroll", function(){ // or window.addEventListener("scroll"....
      //   console.log('scroll')
      //   let st = window.pageYOffset || document.documentElement.scrollTop; // Credits: "https://github.com/qeremy/so/blob/master/so.dom.js#L426"
      //   if (st > scrollAnchor){
      //     if ((currentDeck == -1) || currentSlide == decks[currentSlide].slides.length-1){
      //       transitionToNextDeck();
      //     } else {
      //       nextSlide()
      //     }
      //   } else {
      //     if (currentSlide == 0 && currentDeck == -1){
      //       transitionToPreviousDeck();
      //     }
      //   }
      //   lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling
      // }, false);
    </script>
  </body>
</html>
